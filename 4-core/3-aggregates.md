# Агрегаты

В нашем приложении будет 2 вырожденых агрегата:

1. пользователь
2. пост

Они вырождены, т.к. агрегаты не содержат ничего кроме корневой сущности(корня агрегата).
Если бы мы предусмотрели возможность оставлять коментарии, то вероятно агрегат Пост включал бы сущность
Комментарий.


Есть несколько способов моделировать сущности в clojure

1. Использовать мапы:

   ```clojure
   {:type :post
    :title "Some title"
    :content "Some content"}
   ```

   Его минус в том, что реализовать полиморфизм для мап можно только с помощью мультиметодов.
   Также нам явно нужно указывать тип.

2. Использовать записи
   ```clojrue
   (defrecord Post [id title content created-at updated-at])

   ```
   При этом мы можем использовать как протоколы, так и мультиметоды.
   Каждая сущность имеет свой тип(класс). При этом записи поддерживают интерфейс мап.
   И их объявление является документацией того, какие поля они имеют.

3. Модель datomic / datascript
   Не рассматриваем.

## Связи


## Конструктор

Для записи нельзя объявить специальный конструктор
